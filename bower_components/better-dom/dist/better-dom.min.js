/**
 * @file better-dom.js
 * @overview better-dom: Live extension playground
 * @version 2.0.0-rc.7 Thu, 02 Oct 2014 17:33:57 GMT
 * @copyright 2013-2014 Maksim Chemerisuk
 * @license MIT
 * @see https://github.com/chemerisuk/better-dom
 */
!function(){"use strict";function a(a){var b=arguments[1];void 0===b&&(b="$Element");var c="http://chemerisuk.github.io/better-dom/"+b+".html#"+a;this.message=b+"#"+a+" was called with illegal arguments. Check "+c+" to verify the method call"}function b(b){a.call(this,b,"DOM")}function c(){}function d(a){if(!(this instanceof d)){if(a){var b=a["__2000000-rc007__"];return b?b:new d(a)}return new c}a&&(this[0]=a,this._={_handlers:[],_watchers:{}},a["__2000000-rc007__"]=this)}var e=Array.prototype.slice,f=window,g=f.document,h=g.documentElement,i=f.navigator.userAgent,j=g.attachEvent&&!f.CSSKeyframesRule,k=~i.indexOf("Android")&&i.indexOf("Chrome")<0,l=!!g.addEventListener,m=f.WebKitAnimationEvent?"-webkit-":"",n="dataavailable";a.prototype=new TypeError,b.prototype=new TypeError,d.prototype={constructor:function(a){return d(a&&1===a.nodeType?a:null)},toString:function(){var a=this[0];return a?a.tagName.toLowerCase():""},valueOf:function(){return"2000000-rc007"}},c.prototype=new d;var o=new d(h),p=f.DOM;o.noConflict=function(){return f.DOM===o&&(f.DOM=p),o},f.DOM=o;var q={"(":1,")":2,"^":3,">":4,"+":5,"*":6,"`":7,"[":8,".":8,"#":8},r=/`[^`]*`|\[[^\]]*\]|\.[^()>^+*`[#]+|[^()>^+*`[#.]+|\^+|./g,s=/\s*([\w\-]+)(?:=((?:`([^`]*)`)|[^\s]*))?/g,t=/(\$+)(?:@(-)?(\d+)?)?/g,u=/\./g,v=/\$/g,w={"":""},x=function(a,b,c,d){var e=c&&c.indexOf('"')>=0?"'":'"';return"string"==typeof d?c=d:"string"!=typeof c&&(c=b)," "+b+"="+e+c+e},y=function(a,b){return function(c){var d=b?c.lastIndexOf("<"):c.indexOf(">");return c.substr(0,d)+a+c.substr(d)}},z=function(a){return w[a]||(w[a]="<"+a+"></"+a+">")},A=function(a,b){var c,d=Array(a);for(c=0;a>c;++c)d[c]=b.replace(t,function(b,d,e,f){var g=(e?a-c-1:c)+(f?+f:1);return(d+g).slice(-d.length).replace(v,"0")});return d};"area base br col hr img input link meta param command keygen source".split(" ").forEach(function(a){w[a]="<"+a+">"}),o.emmet=function(a,c){var d,e,f;if("string"!=typeof a)throw new b("emmet");if(c&&(a=o.format(a,c)),a in w)return w[a];var g=[],h=[];f=a.match(r),d=0,e=f.length;for(var i;e>d;){i=f[d++];var j=i[0],k=q[j];if(k){if("("!==i)for(var l=0,m="^"===j?i.length:1;m>l;++l)for(;g[0]!==j&&q[g[0]]>=k;){var n=g.shift();if(h.push(n),"^"===j&&">"===n)break}")"===i?g.shift():(("["===j||"`"===j)&&h.push(i.slice(1,-1)),"."===j&&h.push(i.substr(1).replace(u," ")),g.unshift(j))}else h.push(i)}d=e=f=void 0,h=h.concat(g),g=[],d=0,e=h.length;for(var p;e>d;){if(p=h[d++],p in q){var t=g.shift(),v=g.shift();switch("string"==typeof v&&(v=[z(v)]),p){case".":t=y(' class="'+t+'"');break;case"#":t=y(' id="'+t+'"');break;case"[":t=y(t.replace(s,x));break;case"*":v=A(+t,v.join(""));break;case"`":g.unshift(v),v=[t];break;default:t="string"==typeof t?z(t):t.join(""),">"===p?t=y(t,!0):v.push(t)}p="function"==typeof t?v.map(t):v}g.unshift(p)}return d=e=void 0,h=1===h.length?z(g[0]):g[0].join("")};var B=w,C=g.createElement("body"),D=function(a){return function(b,c){var e,f;if(b&&b in B)e=g.createElement(b),a&&(e=[new d(e)]);else for(b=b.trim(),b="<"===b[0]&&">"===b[b.length-1]?c?o.format(b,c):b:o.emmet(b,c),C.innerHTML=b,e=a?[]:null;f=C.firstChild;)if(C.removeChild(f),1===f.nodeType){if(!a){e=f;break}e.push(new d(f))}return a?e:d(e)}};o.create=D(""),o.createAll=D("All");var E=Array.prototype,F=g.scripts[0],G={computeStyle:function(a){return f.getComputedStyle?f.getComputedStyle(a):a.currentStyle},injectElement:function(a){return F.parentNode.insertBefore(a,F)},every:E.every,each:E.forEach,filter:E.filter,map:E.map,isArray:Array.isArray,keys:Object.keys,assign:function(a,b){return Object.keys(b).forEach(function(c){a[c]=b[c]}),a},safeInvoke:function(a,b,c,d){try{a.call(b,c,d)}catch(e){f.setTimeout(function(){throw e},1)}}},H={get:{},set:{}},I=/\-./g,J=/[A-Z]/g,K=["Top","Right","Bottom","Left"],L=G.computeStyle(h),M=L.length?Array.prototype.slice.call(L,0):G.keys(L).map(function(a){return a.replace(J,function(a){return"-"+a.toLowerCase()})}),N={font:["fontStyle","fontSize","/","lineHeight","fontFamily"],padding:K.map(function(a){return"padding"+a}),margin:K.map(function(a){return"margin"+a}),"border-width":K.map(function(a){return"border"+a+"Width"}),"border-style":K.map(function(a){return"border"+a+"Style"})};M.forEach(function(a){var b="-"===a[0]?a.substr(1,a.indexOf("-",1)-1):null,c=b?a.substr(b.length+2):a,d=a.replace(I,function(a){return a[1].toUpperCase()});d in L||(d=d[0].toLowerCase()+d.substr(1)),H.get[c]=function(a){return a[d]},H.set[c]=function(b,c){c="number"==typeof c?c+"px":c.toString(),b["cssText"in b?d:a]=c}})," float fill-opacity font-weight line-height opacity orphans widows z-index zoom ".split(" ").forEach(function(a){var b=a.replace(I,function(a){return a[1].toUpperCase()});"float"===a&&(b="cssFloat"in L?"cssFloat":"styleFloat",H.get[a]=function(a){return a[b]}),H.set[a]=function(c,d){c["cssText"in c?b:a]=d.toString()}}),G.keys(N).forEach(function(a){var b=N[a];H.get[a]=function(a){var c=[],d=function(b,d){return c.push("/"===b?b:a[b]),!c[d]};return b.some(d)?"":c.join(" ")},H.set[a]=function(c,d){d&&"cssText"in c?c.cssText+=";"+a+":"+d:b.forEach(function(a){return c[a]="number"==typeof d?d+"px":d.toString()})}});var O=H,P=G.injectElement(g.createElement("style")),Q=P.sheet||P.styleSheet,R=Q.cssRules||Q.rules;o.importStyles=function(a,c){if(c&&"object"==typeof c){var d=G.keys(c).reduce(function(a,b){var d=O.set[b];return d?d(a,c[b]):a[b]=c[b],a},{});c=G.keys(d).map(function(a){return a+":"+d[a]}).join(";")}if("string"!=typeof a||"string"!=typeof c)throw new b("importStyles");Q.cssRules?Q.insertRule(a+"{"+c+"}",R.length):a.split(",").forEach(function(a){Q.addRule(a,c)})};var S=o.importStyles,T=/^(\w*)(?:#([\w\-]+))?(?:\[([\w\-\=]+)\])?(?:\.([\w\-]+))?$/,U="m oM msM mozM webkitM".split(" ").reduce(function(a,b){var c=b+"atchesSelector";return a||h[c]&&c},null),V=function(a,b){if("string"!=typeof a)return null;var c=T.exec(a);return c&&(c[1]&&(c[1]=c[1].toLowerCase()),c[3]&&(c[3]=c[3].split("=")),c[4]&&(c[4]=" "+c[4]+" ")),function(d){var e,f,g,h;for(c||U||(h=(b||document).querySelectorAll(a));d&&1===d.nodeType;d=d.parentNode){if(c)g=!(c[1]&&d.nodeName.toLowerCase()!==c[1]||c[2]&&d.id!==c[2]||c[3]&&(c[3][1]?d.getAttribute(c[3][0])!==c[3][1]:!d.hasAttribute(c[3][0]))||c[4]&&!((" "+d.className+" ").indexOf(c[4])>=0));else if(U)g=d[U](a);else{e=0,f=h.length;for(var i;f>e;)if(i=h[e++],i===d)return i;e=f=void 0}if(g||!b||d===b)break}return g&&d}},W=/^(on|do)[A-Z]/,X="DOM"+Date.now(),Y=function(a,b){return function(c){var d;c=c||f.event,d=j?c.srcUrn===n&&c.srcElement===a:c.animationName===X&&c.target===a,d&&((c._skip=c._skip||{})[b]=!0)}},Z=function(a,b,c,e){var f=G.keys(c).filter(function(a){return!!W.exec(a)}),g=c.hasOwnProperty("constructor")&&c.constructor,h=function(a,h){var i=d(a);j?a.attachEvent("on"+Z.EVENT_TYPE,Y(a,e)):a.addEventListener(Z.EVENT_TYPE,Y(a,e),!1),(h===!0||b(i)!==!1)&&(G.assign(i,c),g&&G.safeInvoke(g,i),h!==!0&&f.forEach(function(a){delete i[a]}))};return h.accept=V(a),h};j?Z.EVENT_TYPE=n:(Z.ANIMATION_ID=X,Z.EVENT_TYPE=m?"webkitAnimationEnd":"animationend"),Z.traverse=function(a,b){return function(c,d){!b[d]&&c.accept(a)&&c(a)}};var $,_,ab=Z,bb=[],cb=function(){return!0},db=function(){return!1};if(j){var eb=g.querySelector("link[rel=htc]");if(eb)eb=eb.href;else{"console"in f&&f.console.log("WARNING: In order to use live extensions in IE < 10 you have to include extra files. See https://github.com/chemerisuk/better-dom#notes-about-old-ies for details.");var fb=g.scripts;eb=fb[fb.length-1].src.split("/"),eb="/"+eb.slice(3,eb.length-1).concat("better-dom.htc").join("/")}_={behavior:"url("+eb+") !important"},S("html",_),g.attachEvent("on"+ab.EVENT_TYPE,function(){var a=f.event;a.srcUrn===n&&bb.forEach(ab.traverse(a.srcElement,a._skip||{}))})}else{var gb=g.readyState;(g.attachEvent?"complete"!==gb:"loading"===gb)&&($=function(){$&&(bb.forEach(function(a){a.start()}),$=null)},g.addEventListener("DOMContentLoaded",$,!1),f.addEventListener("load",$,!1)),S("@"+m+"keyframes "+ab.ANIMATION_ID,"from {opacity:.99} to {opacity:1}"),_={"animation-duration":"1ms !important","animation-name":ab.ANIMATION_ID+" !important"},g.addEventListener(ab.EVENT_TYPE,function(a){a.animationName===ab.ANIMATION_ID&&bb.forEach(ab.traverse(a.target,a._skip||{}))},!1)}o.extend=function(a,c,e){if(2===arguments.length&&(e=c,c=!0),"boolean"==typeof c&&(c=c?cb:db),"function"==typeof e&&(e={constructor:e}),!e||"object"!=typeof e||"function"!=typeof c)throw new b("extend");if("*"===a)G.assign(d.prototype,e);else{var f=ab(a,c,e,bb.length);f.start=function(){G.each.call(g.querySelectorAll(a),f),o.importStyles(a,_)},bb.push(f),$||f.start()}};var hb=bb,ib=/\{([\w\-]+)\}/g;o.format=function(a,c){if("string"!=typeof a)throw new b("format");return c&&"object"==typeof c||(c={}),a.replace(ib,function(a,b){return b in c?String(c[b]):a})},o.importScripts=function(){var a=e.call(arguments,0),c=function(){var d,e=a.shift(),f=typeof e;if("string"===f)d=g.createElement("script"),d.src=e,d.onload=c,d.async=!0,G.injectElement(d);else if("function"===f)e();else if(e)throw new b("importScripts")};c()};var jb=function(a){hb.forEach(function(b){b.accept(a)&&b(a,!0)}),G.each.call(a.children,jb)},kb=function(a){return function(b,d){if(!b)return new c;var e=o["create"+a](b,d);return a?e.forEach(function(a){jb(a[0])}):jb(e[0]),e}};o.mock=kb(""),o.mockAll=kb("All");var lb=function(b){return function(c){if(b){if(c&&"string"!=typeof c)throw new a("children")}else if(c&&"number"!=typeof c)throw new a("child");var e=this[0],f=V(c),g=e.children;return l||(g=G.filter.call(g,function(a){return 1===a.nodeType})),b?(f&&(g=G.filter.call(g,f)),G.map.call(g,d)):(0>c&&(c=g.length+c),d(g[c]))}};G.assign(d.prototype,{child:lb(!1),children:lb(!0)}),G.assign(c.prototype,{child:function(){return new c},children:function(){return[]}});var mb=/[\n\t\r]/g,nb=function(b,c){var d="contains"===b?"hasClass":b+"Class";return h.classList&&(c=function(a,c){return a[0].classList[b](c)}),"hasClass"===d||"toggleClass"===d?function(b,e){if("boolean"==typeof e&&"toggleClass"===d)return this[e?"addClass":"removeClass"](b),e;if("string"!=typeof b)throw new a(d);return c(this,b)}:function(){var b,e,f=arguments;b=0,e=f.length;for(var g;e>b;){if(g=f[b++],"string"!=typeof g)throw new a(d);c(this,g)}return b=e=void 0,this}},ob={hasClass:nb("contains",function(a,b){return(" "+a[0].className+" ").replace(mb," ").indexOf(" "+b+" ")>=0}),addClass:nb("add",function(a,b){a.hasClass(b)||(a[0].className+=" "+b)}),removeClass:nb("remove",function(a,b){a[0].className=(" "+a[0].className+" ").replace(mb," ").replace(" "+b+" "," ").trim()}),toggleClass:nb("toggle",function(a,b){var c=a.hasClass(b);return c?a.removeClass(b):a[0].className+=" "+b,!c})};G.assign(d.prototype,ob),G.keys(ob).forEach(function(a){c.prototype[a]=function(){return"hasClass"===a||"toggleClass"===a?!1:this}}),d.prototype.clone=function(){var b=arguments[0];if(void 0===b&&(b=!0),"boolean"!=typeof b)throw new a("clone");var c,e=this[0];return l?c=new d(e.cloneNode(b)):(c=o.create(e.outerHTML),b||c.set("innerHTML","")),c},c.prototype.clone=function(){return new c},d.prototype.contains=function(b){var c=this[0];if(b instanceof d){var e=b[0];return e===c?!0:c.contains?c.contains(e):16&c.compareDocumentPosition(e)}throw new a("contains")},c.prototype.contains=function(){return!1},d.prototype.css=function(b,c){var d,e,f,g=this,h=arguments.length,i=this[0],j=i.style,k=typeof b;if(1===h&&("string"===k||G.isArray(b)))return c=("string"===k?[b]:b).reduce(function(a,b){return d=O.get[b],c=d?d(j):j[b],e||c||(j=G.computeStyle(i),c=d?d(j):j[b],e=!0),a[b]=c,a},{}),"string"===k?c[b]:c;if(f=function(a,b){var c=O.set[a];"function"==typeof b&&(b=b.call(g,g.css(a))),null==b&&(b=""),c?c(j,b):j[a]="number"==typeof b?b+"px":b.toString()},1===h&&b&&"object"===k)G.keys(b).forEach(function(a){f(a,b[a])});else{if(2!==h||"string"!==k)throw new a("css");f(b,c)}return this},c.prototype.css=function(a){return 1!==arguments.length||"string"!=typeof a&&!G.isArray(a)?this:void 0};var pb=g.getElementsByClassName?/^(?:(\w+)|\.([\w\-]+))$/:/^(?:(\w+))$/,qb=/'|\\/g,rb="DOM"+Date.now(),sb=function(b){return function(c){if("string"!=typeof c)throw new a("find"+b);var e,f,g,h,i=this[0],j=pb.exec(c);if(j)e=j[1]?i.getElementsByTagName(c):i.getElementsByClassName(j[2]),e&&!b&&(e=e[0]);else{f=!0,g=rb,h=i,this!==o&&((f=i.getAttribute("id"))?g=f.replace(qb,"\\$&"):i.setAttribute("id",g),g="[id='"+g+"'] ",c=g+c.split(",").join(","+g));try{e=h["querySelector"+b](c)}finally{f||i.removeAttribute("id")}}return b?G.map.call(e,d):d(e)}};G.assign(d.prototype,{find:sb(""),findAll:sb("All")}),G.assign(c.prototype,{find:function(){return new c},findAll:function(){return[]}});var tb={};"onfocusin"in h?(tb.focus=function(a){a._type="focusin"},tb.blur=function(a){a._type="focusout"}):tb.focus=tb.blur=function(a){a.capturing=!0},g.createElement("input").validity&&(tb.invalid=function(a){a.capturing=!0}),l||["submit","change","reset"].forEach(function(a){tb[a]=function(a){a._type=n}});var ub=tb,vb=function(a,b,c,e,i,j){var k=i[0],m=ub[a],o=V(b,k),p=function(b){if(b=b||f.event,vb.skip!==a&&(p._type!==n||b.srcUrn===a)){var m=b.target||b.srcElement||g,q=o?o(m):k,r=b._args||[],s=e;q&&(j&&i.off(a,c),s=s?s.map(function(c){if("number"==typeof c)return r[c-1];if(!l)switch(c){case"which":return b.keyCode;case"button":var e=b.button;return 1&e?1:2&e?3:4&e?2:0;case"pageX":return b.clientX+h.scrollLeft-h.clientLeft;case"pageY":return b.clientY+h.scrollTop-h.clientTop}switch(c){case"type":return a;case"defaultPrevented":return"defaultPrevented"in b?b.defaultPrevented:b.returnValue===!1;case"target":return d(m);case"currentTarget":return d(q);case"relatedTarget":return d(b.relatedTarget||b[(b.toElement===k?"from":"to")+"Element"])}return b[c]}):r,c.apply(i,s)===!1&&(l?b.preventDefault():b.returnValue=!1))}};return m&&(p=m(p,a)||p),l||"on"+(p._type||a)in k||(p._type=n),p.type=b?a+" "+b:a,p.callback=c,p},wb=vb;d.prototype.fire=function(b){var c,d,f,h=e.call(arguments,1),i=this[0],j=typeof b,k={};if("string"!==j)throw new a("fire");return(c=ub[b])&&(k=c(k)||k),j=k._type||b,l?(d=g.createEvent("HTMLEvents"),d.initEvent(j,!0,!0),d._args=h,f=i.dispatchEvent(d)):(d=g.createEventObject(),d._args=h,"on"+j in i||(j=n),j===n&&(d.srcUrn=b),i.fireEvent("on"+j,d),f=d.returnValue!==!1),f&&i[b]&&("focus"!==b&&"blur"!==b||i.offsetWidth)&&(wb.skip=b,i[b](),wb.skip=null),f},c.prototype.fire=function(){return!1};var xb={get:{},set:{}};"tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" ").forEach(function(a){xb.get[a.toLowerCase()]=function(b){return b[a]}}),xb.get.style=function(a){return a.style.cssText},xb.set.style=function(a,b){a.style.cssText=b},xb.get.title=function(a){return a===h?g.title:a.title},xb.set.title=function(a,b){(a===h?g:a).title=b},xb.get.undefined=function(a){var b;switch(a.tagName){case"SELECT":return~a.selectedIndex?a.options[a.selectedIndex].value:"";case"OPTION":b=a.hasAttribute("value")?"value":"text";break;default:b=a.type&&"value"in a?"value":"innerHTML"}return a[b]},xb.set.value=function(a,b){"SELECT"===a.tagName?G.every.call(a.options,function(a){return!(a.selected=a.value===b)})&&(a.selectedIndex=-1):a[l||"textarea"!==a.type?"value":"innerText"]=b},xb.get.type=function(a){return a.getAttribute("type")||a.type},l||(xb.get.textContent=function(a){return a.innerText},xb.set.textContent=function(a,b){a.innerText=b});var yb=xb,zb=/[A-Z]/g,Ab=function(a,b){var c=a.getAttribute("data-"+b.replace(zb,function(a){return"-"+a.toLowerCase()}));if(null!=c&&"{"===c[0]&&"}"===c[c.length-1])try{c=JSON.parse(c)}catch(d){}return c};d.prototype.get=function(b){var c=this,d=this[0],e=yb.get[b];if(e)return e(d,b);if("string"==typeof b){if(b in d)return d[b];if("_"!==b[0])return d.getAttribute(b);var f,g=b.substr(1),h=this._;return f=g in h?h[g]:h[g]=Ab(d,g)}if(G.isArray(b))return b.reduce(function(a,b){return a[b]=c.get(b),a},{});throw new a("get")},c.prototype.get=function(){};var Bb=function(b,c,e,f){return function(){var h=arguments[0];void 0===h&&(h="");var i=this[0];if(!(e||i.parentNode&&h!==o))return this;if("function"==typeof h&&(h=h.call(this)),"string"==typeof h)h&&(h=c?h.trim():o.create(h)[0]);else if(h instanceof d)h=h[0];else{if(!G.isArray(h))throw new a(b);h=h.reduce(function(a,b){return a.appendChild(b[0]),a},g.createDocumentFragment())}return h&&"string"==typeof h?i.insertAdjacentHTML(c,h):(h||!c)&&f(i,h),this}},Cb={after:Bb("after","afterend",!1,function(a,b){a.parentNode.insertBefore(b,a.nextSibling)}),before:Bb("before","beforebegin",!1,function(a,b){a.parentNode.insertBefore(b,a)}),prepend:Bb("prepend","afterbegin",!0,function(a,b){a.insertBefore(b,a.firstChild)}),append:Bb("append","beforeend",!0,function(a,b){a.appendChild(b)}),replace:Bb("replace","",!1,function(a,b){a.parentNode.replaceChild(b,a)}),remove:Bb("remove","",!1,function(a){a.parentNode.removeChild(a)})};G.assign(d.prototype,Cb),G.keys(Cb).forEach(function(a){c.prototype[a]=function(){return this}});var Db={};Db[":focus"]=function(a){return a===g.activeElement},Db[":hidden"]=function(a){if("true"===a.getAttribute("aria-hidden"))return!0;var b=G.computeStyle(a);return"hidden"===b.visibility||"none"===b.display||!h.contains(a)},Db[":visible"]=function(a){return!Db[":hidden"](a)};var Eb=Db;d.prototype.matches=function(b){if(!b||"string"!=typeof b)throw new a("matches");var c=Eb[b]||V(b);return!!c(this[0],this)},c.prototype.matches=function(){return!1},d.prototype.off=function(b,c){if("string"!=typeof b)throw new a("off");var d=this[0];return this._._handlers=this._._handlers.filter(function(a){return b!==a.type||c&&c!==a.callback?!0:(b=a._type||a.type,void(l?d.removeEventListener(b,a,!!a.capturing):d.detachEvent("on"+b,a)))}),this},c.prototype.off=function(){return this},d.prototype.offset=function(){var a=this[0],b=h.clientTop,c=h.clientLeft,d=f.pageYOffset||h.scrollTop,e=f.pageXOffset||h.scrollLeft,g=a.getBoundingClientRect();return{top:g.top+d-b,left:g.left+e-c,right:g.right+e-c,bottom:g.bottom+d-b,width:g.right-g.left,height:g.bottom-g.top}},c.prototype.offset=function(){return{top:0,left:0,right:0,bottom:0,width:0,height:0}};var Fb=function(b){return function(c,d,e,f){var g=this;if("string"==typeof c){if("function"==typeof e&&(f=e,"string"==typeof d?e=null:(e=d,d=null)),"function"==typeof d&&(f=d,d=null,e=null),"function"!=typeof f)throw new a(b);var h=this[0],i=wb(c,d,f,e,this,"once"===b);i&&(l?h.addEventListener(i._type||c,i,!!i.capturing):h.attachEvent("on"+(i._type||c),i),this._._handlers.push(i))}else{if("object"!=typeof c)throw new a(b);G.isArray(c)?c.forEach(function(a){g[b](a,d,e,f)}):G.keys(c).forEach(function(a){g[b](a,c[a])})}return this}},Gb={on:Fb("on"),once:Fb("once")};G.assign(d.prototype,Gb),G.keys(Gb).forEach(function(a){c.prototype[a]=function(){return this}}),d.prototype.set=function(b,c){var d=this,e=this[0];if(1===arguments.length&&(c="function"==typeof b?b:null==b?"":String(b),"[object Object]"!==c)){var f=e.tagName;b="INPUT"===f||"TEXTAREA"===f||"SELECT"===f||"OPTION"===f?"value":"innerHTML"}var g,h=yb.set[b],i=this._._watchers[b];if((i||"function"==typeof c)&&(g=this.get(b)),"string"==typeof b)"_"===b[0]?this._[b.substr(1)]=c:("function"==typeof c&&(c=c.call(this,g)),h?h(e,c):null==c?e.removeAttribute(b):b in e?e[b]=c:e.setAttribute(b,c),(!l||k)&&(e.className=e.className));else if(G.isArray(b))b.forEach(function(a){d.set(a,c)});else{if("object"!=typeof b)throw new a("set");G.keys(b).forEach(function(a){d.set(a,b[a])})}return i&&g!==c&&i.forEach(function(a){G.safeInvoke(a,d,c,g)}),this},c.prototype.set=function(){return this};var Hb=function(b,c,e){return function(f){if(f&&"string"!=typeof f)throw new a(b);var g=V(f),h=e?[]:null,i=this[0];for(i&&"closest"!==b&&(i=i[c]);i;i=i[c])if(1===i.nodeType&&(!g||g(i))){if(!e)break;h.push(i)}return e?G.map.call(h,d):d(i)}},Ib={next:Hb("next","nextSibling"),prev:Hb("prev","previousSibling"),nextAll:Hb("nextAll","nextSibling",!0),prevAll:Hb("prevAll","previousSibling",!0),closest:Hb("closest","parentNode")};G.assign(d.prototype,Ib),G.keys(Ib).forEach(function(a){c.prototype[a]=function(){return"All"===a.slice(-3)?[]:new c}});var Jb=!k&&!j,Kb=["timing-function","property","duration","delay"].map(function(a){return"transition-"+a}),Lb=m?"webkitTransitionEnd":"transitionend",Mb=m?"webkitAnimationEnd":"animationend",Nb=function(a){var b=parseFloat(a)||0;return b&&"ms"!==a.slice(-2)?1e3*b:b},Ob=function(a){var b=O.get["transition-delay"](a).split(","),c=O.get["transition-duration"](a).split(",");return Math.max.apply(Math,c.map(function(a,c){return Nb(a)+(Nb(b[c])||0)}))},Pb=function(a,b,c,d,e){var f=Ob(c);if(!f)return!1;var g,h;return h=Kb.map(function(a,b){return O.get[a](c).split(b?", ":/, (?!\d)/)}),g=h[1].indexOf("visibility"),0>g&&(g=h[2].indexOf("0s")),0>g&&(g=h[0].length),h[0][g]="linear",h[1][g]="visibility",h[d?2:3][g]="0s",h[d?3:2][g]=f+"ms",h.forEach(function(a,c){O.set[Kb[c]](b,a.join(", "))}),a.addEventListener(Lb,function i(c){"visibility"===c.propertyName&&(c.stopPropagation(),a.removeEventListener(Lb,i,!0),b.willChange="",e())},!0),b.visibility=d?"inherit":"hidden",b.willChange=h[1].join(", "),!0},Qb=function(a,b,c,d,e,f){var g=Nb(O.get["animation-duration"](c));return g?(a.addEventListener(Mb,function h(c){c.animationName===d&&(c.stopPropagation(),a.removeEventListener(Mb,h,!0),O.set["animation-name"](b,""),f())},!0),O.set["animation-direction"](b,e?"normal":"reverse"),O.set["animation-name"](b,d),!0):!1},Rb=function(b,c){return function(d,e){var f=this;if("string"!=typeof d&&(e=d,d=null),e&&"function"!=typeof e)throw new a(b);var g,h=this[0],i=h.style,j=G.computeStyle(h),k=j.visibility,l=j.display,m=c,n=function(){String(m)===h.getAttribute("aria-hidden")&&(m&&d&&(g?i.visibility="hidden":i.display="none"),e&&e.call(f))};return"boolean"!=typeof m&&(m="none"!==l&&"hidden"!==k&&"true"!==h.getAttribute("aria-hidden")),Jb&&(m||(k=h.offsetWidth),g=d?Qb(h,i,j,d,m,n):Pb(h,i,j,m,n)),m?"none"===l||g||(this._._display=l):"none"!==l||g||(i.display=this._._display||"inherit"),i.visibility=m&&!d?"hidden":"inherit",this.set("aria-hidden",String(m)),g||n(),this}},Sb={show:Rb("show",!1),hide:Rb("hide",!0),toggle:Rb("toggle")};G.assign(d.prototype,Sb),G.keys(Sb).forEach(function(a){c.prototype[a]=function(){return this}});var Tb={watch:function(a,b){var c=this._._watchers;return c[a]||(c[a]=[]),c[a].push(b),this},unwatch:function(a,b){var c=this._._watchers;return c[a]&&(c[a]=c[a].filter(function(a){return a!==b})),this}};G.assign(d.prototype,Tb),G.keys(Tb).forEach(function(a){c.prototype[a]=function(){return this}})}();