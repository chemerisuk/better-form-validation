/**
 * @overview better-dom: Live extension playground
 * @version 2.0.0-rc.5 2014-09-23T13:31:23
 * @copyright 2013-2014 Maksim Chemerisuk
 * @license MIT
 * @see https://github.com/chemerisuk/better-dom
 */
!function(){"use strict";function a(a){var b=arguments[1];void 0===b&&(b="$Element");var c="http://chemerisuk.github.io/better-dom/"+b+".html#"+a;this.message=b+"#"+a+" was called with illegal arguments. Check "+c+" to verify the method call"}function b(b){a.call(this,b,"DOM")}function c(a){return a&&a[n]?a[n]:this instanceof c?(a&&(a[n]=this,this[0]=a),void(this._={_handlers:[],_watchers:{}})):new c(a)}var d=Array.prototype.slice,e=window,f=e.document,g=f.documentElement,h=e.navigator.userAgent,i=f.attachEvent&&!e.CSSKeyframesRule,j=~h.indexOf("Android")&&h.indexOf("Chrome")<0,k=!!f.addEventListener,l=e.WebKitAnimationEvent?"-webkit-":"",m="dataavailable";a.prototype=new TypeError,b.prototype=new TypeError;var n="__"+Math.random().toString(32).substr(2)+"__";c.prototype={constructor:function(a){return new c(a&&1===a.nodeType?a:null)},toString:function(){var a=this[0];return a?a.tagName.toLowerCase():""}};var o=new c(g);o.VERSION="2.0.0-rc.5";var p=e.DOM;o.noConflict=function(){return e.DOM===o&&(e.DOM=p),o},e.DOM=o;var q=/^(?:[a-z-]+|\s*(<.+>)\s*)$/i,r=f.createElement("body"),s=function(a){return function(d,e){var g,h,i=q.exec(d);if(d&&i&&!i[1])g=f.createElement(d),a&&(g=[new c(g)]);else{if(i&&i[1])d=e?o.format(i[1],e):i[1];else{if("string"!=typeof d)throw new b("create"+a);d=o.emmet(d,e)}for(r.innerHTML=d,g=a?[]:null;h=r.firstChild;)if(r.removeChild(h),1===h.nodeType){if(!a){g=h;break}g.push(new c(h))}}return a?g:new c(g)}};o.create=s(""),o.createAll=s("All");var t={"(":1,")":2,"^":3,">":4,"+":4,"*":5,"`":6,"[":7,".":8,"#":9},u=/`[^`]*`|\[[^\]]*\]|\.[^()>^+*`[#]+|[^()>^+*`[#.]+|\^+|./g,v=/([\w\-]+)(?:=((?:`((?:\\?.)*)?`)|[^\s]+))?/g,w=/(\$+)(?:@(-)?(\d+)?)?/g,x={"":""},y=function(a,b,c,d){var e=c&&c.indexOf('"')>=0?"'":'"';return b+"="+e+(d||c||b)+e},z=function(a,b){return function(c){var d=b?c.lastIndexOf("<"):c.indexOf(">");return c.substr(0,d)+a+c.substr(d)}},A=function(a){var b=x[a];return b||(b=x[a]="<"+a+"></"+a+">"),b},B=function(a,b){var c,d=Array(a);for(c=0;a>c;++c)d[c]=b.replace(w,function(b,d,e,f){var g=(e?a-c-1:c)+(f?+f:1);return(d+g).slice(-d.length).split("$").join("0")});return d};"area base br col hr img input link meta param command keygen source".split(" ").forEach(function(a){x[a]="<"+a+">"}),o.emmet=function(a,c){var d,e,f;if("string"!=typeof a)throw new b("emmet");if(c&&(a=o.format(a,c)),a in x)return x[a];var g=[],h=[];f=a.match(u),d=0,e=f.length;for(var i;e>d;){i=f[d++];var j=i[0],k=t[j];if(k){if("("!==i)for(var l=0,m="^"===j?i.length:1;m>l;++l)for(;t[g[0]]>k;){var n=g.shift();if(h.push(n),"^"===j&&">"===n)break}")"===i?g.shift():(("["===j||"`"===j)&&h.push(i.substr(1,i.length-2)),"."===j&&h.push(i.substr(1).split(".").join(" ")),g.unshift(j))}else h.push(i)}if(d=e=f=void 0,h=h.concat(g),1===h.length)return A(h[0]);g=[],d=0,e=h.length;for(var p;e>d;){if(p=h[d++],p in t){var q=g.shift(),r=g.shift();switch("string"==typeof r&&(r=[A(r)]),p){case".":q=z(' class="'+q+'"');break;case"#":q=z(' id="'+q+'"');break;case"[":q&&(q=z(" "+q.replace(v,y)));break;case"`":g.unshift(r),r=[q];break;case"*":r=B(+q,r.join(""));break;default:q="string"==typeof q?A(q):q.join(""),">"===p?q=z(q,!0):r.push(q)}p="function"==typeof q?r.map(q):r}g.unshift(p)}return d=e=void 0,h=g[0].join(""),c&&(x[a]=h),h};var C=Array.prototype,D=f.scripts[0],E={computeStyle:function(a){return e.getComputedStyle?e.getComputedStyle(a):a.currentStyle},injectElement:function(a){return D.parentNode.insertBefore(a,D)},every:C.every,each:C.forEach,filter:C.filter,map:C.map,isArray:Array.isArray,keys:Object.keys,assign:function(a,b){return Object.keys(b).forEach(function(c){a[c]=b[c]}),a},defer:function(a){return e.setTimeout(a,1)}},F={get:{},set:{}},G=/\-./g,H=/[A-Z]/g,I=["Top","Right","Bottom","Left"],J=E.computeStyle(g),K=J.length?Array.prototype.slice.call(J,0):E.keys(J).map(function(a){return a.replace(H,function(a){return"-"+a.toLowerCase()})}),L={font:["fontStyle","fontSize","/","lineHeight","fontFamily"],padding:I.map(function(a){return"padding"+a}),margin:I.map(function(a){return"margin"+a}),"border-width":I.map(function(a){return"border"+a+"Width"}),"border-style":I.map(function(a){return"border"+a+"Style"})};K.forEach(function(a){var b="-"===a[0]?a.substr(1,a.indexOf("-",1)-1):null,c=b?a.substr(b.length+2):a,d=a.replace(G,function(a){return a[1].toUpperCase()});d in J||(d=d[0].toLowerCase()+d.substr(1)),F.get[c]=function(a){return a[d]},F.set[c]=function(b,c){c="number"==typeof c?c+"px":c.toString(),b["cssText"in b?d:a]=c}})," float fill-opacity font-weight line-height opacity orphans widows z-index zoom ".split(" ").forEach(function(a){var b=a.replace(G,function(a){return a[1].toUpperCase()});"float"===a&&(b="cssFloat"in J?"cssFloat":"styleFloat",F.get[a]=function(a){return a[b]}),F.set[a]=function(c,d){c["cssText"in c?b:a]=d.toString()}}),E.keys(L).forEach(function(a){var b=L[a];F.get[a]=function(a){var c=[],d=function(b,d){return c.push("/"===b?b:a[b]),!c[d]};return b.some(d)?"":c.join(" ")},F.set[a]=function(c,d){d&&"cssText"in c?c.cssText+=";"+a+":"+d:b.forEach(function(a){return c[a]="number"==typeof d?d+"px":d.toString()})}});var M=F,N=E.injectElement(f.createElement("style")),O=N.sheet||N.styleSheet,P=O.cssRules||O.rules;o.importStyles=function(a,c){if(c&&"object"==typeof c){var d=E.keys(c).reduce(function(a,b){var d=M.set[b];return d?d(a,c[b]):a[b]=c[b],a},{});c=E.keys(d).map(function(a){return a+":"+d[a]}).join(";")}if("string"!=typeof a||"string"!=typeof c)throw new b("importStyles");O.cssRules?O.insertRule(a+"{"+c+"}",P.length):a.split(",").forEach(function(a){O.addRule(a,c)})};var Q=o.importStyles,R=/^(\w*)(?:#([\w\-]+))?(?:\[([\w\-\=]+)\])?(?:\.([\w\-]+))?$/,S="m oM msM mozM webkitM".split(" ").reduce(function(a,b){var c=b+"atchesSelector";return a||g[c]&&c},null),T=function(a,b){if("string"!=typeof a)return null;var c=R.exec(a);return c&&(c[1]&&(c[1]=c[1].toLowerCase()),c[3]&&(c[3]=c[3].split("=")),c[4]&&(c[4]=" "+c[4]+" ")),function(d){var e,f,g,h;for(c||S||(h=(b||document).querySelectorAll(a));d&&1===d.nodeType;d=d.parentNode){if(c)g=!(c[1]&&d.nodeName.toLowerCase()!==c[1]||c[2]&&d.id!==c[2]||c[3]&&(c[3][1]?d.getAttribute(c[3][0])!==c[3][1]:!d.hasAttribute(c[3][0]))||c[4]&&!((" "+d.className+" ").indexOf(c[4])>=0));else if(S)g=d[S](a);else{e=0,f=h.length;for(var i;f>e;)if(i=h[e++],i===d)return i;e=f=void 0}if(g||!b||d===b)break}return g&&d}},U=/^(on|do)[A-Z]/,V="DOM"+Date.now(),W=function(a,b){return function(c){var d;c=c||e.event,d=i?c.srcUrn===m&&c.srcElement===a:c.animationName===V&&c.target===a,d&&((c._skip=c._skip||{})[b]=!0)}},X=function(a,b,d,e){var f=E.keys(d).filter(function(a){return!!U.exec(a)}),g=d.hasOwnProperty("constructor")&&function(a){try{d.constructor.call(a)}catch(b){E.defer(function(){throw b})}},h=function(a,h){var j=c(a);i?a.attachEvent("on"+X.EVENT_TYPE,W(a,e)):a.addEventListener(X.EVENT_TYPE,W(a,e),!1),(h===!0||b(j)!==!1)&&(E.assign(j,d),g&&g(j),h!==!0&&f.forEach(function(a){delete j[a]}))};return h.accept=T(a),h};i?X.EVENT_TYPE=m:(X.ANIMATION_ID=V,X.EVENT_TYPE=l?"webkitAnimationEnd":"animationend"),X.traverse=function(a,b){return function(c,d){!b[d]&&c.accept(a)&&c(a)}};var Y,Z,$=X,_=[],ab=function(){return!0},bb=function(){return!1};if(i){var cb=f.querySelector("link[rel=htc]");if(cb)cb=cb.href;else{"console"in e&&e.console.log("WARNING: In order to use live extensions in IE < 10 you have to include extra files. See https://github.com/chemerisuk/better-dom#notes-about-old-ies for details.");var db=f.scripts;cb=db[db.length-1].src.split("/"),cb="/"+cb.slice(3,cb.length-1).concat("better-dom.htc").join("/")}Z={behavior:"url("+cb+") !important"},Q("html",Z),f.attachEvent("on"+$.EVENT_TYPE,function(){var a=e.event;a.srcUrn===m&&_.forEach($.traverse(a.srcElement,a._skip||{}))})}else{var eb=f.readyState;(f.attachEvent?"complete"!==eb:"loading"===eb)&&(Y=function(){Y&&(_.forEach(function(a){a.start()}),Y=null)},f.addEventListener("DOMContentLoaded",Y,!1),e.addEventListener("load",Y,!1)),Q("@"+l+"keyframes "+$.ANIMATION_ID,"from {opacity:.99} to {opacity:1}"),Z={"animation-duration":"1ms !important","animation-name":$.ANIMATION_ID+" !important"},f.addEventListener($.EVENT_TYPE,function(a){a.animationName===$.ANIMATION_ID&&_.forEach($.traverse(a.target,a._skip||{}))},!1)}o.extend=function(a,d,e){if(2===arguments.length&&(e=d,d=!0),"boolean"==typeof d&&(d=d?ab:bb),"function"==typeof e&&(e={constructor:e}),!e||"object"!=typeof e||"function"!=typeof d)throw new b("extend");if("*"===a)E.assign(c.prototype,e);else{var g=$(a,d,e,_.length);g.start=function(){E.each.call(f.querySelectorAll(a),g),o.importStyles(a,Z)},_.push(g),Y||g.start()}};var fb=_,gb=/\{([\w\-]+)\}/g;o.format=function(a,c){if("string"!=typeof a||c&&"object"!=typeof c)throw new b("format");return a.replace(gb,function(a,b){return b in c?String(c[b]):a})},o.importScripts=function(){var a=d.call(arguments,0),c=function(){var d,e=a.shift(),g=typeof e;if("string"===g)d=f.createElement("script"),d.src=e,d.onload=c,d.async=!0,E.injectElement(d);else if("function"===g)e();else if(e)throw new b("importScripts")};c()};var hb=function(a){fb.forEach(function(b){b.accept(a)&&b(a,!0)}),E.each.call(a.children,hb)},ib=function(a){return function(b,d){if(!b)return new c;var e=o["create"+a](b,d);return a?e.forEach(function(a){hb(a[0])}):hb(e[0]),e}};o.mock=ib(""),o.mockAll=ib("All");var jb=function(b){return function(d){if(b){if(d&&"string"!=typeof d)throw new a("children")}else if(d&&"number"!=typeof d)throw new a("child");var e=this[0],f=T(d),g=e?e.children:null;return e?(k||(g=E.filter.call(g,function(a){return 1===a.nodeType})),b?(f&&(g=E.filter.call(g,f)),E.map.call(g,c)):(0>d&&(d=g.length+d),c(g[d]))):b?[]:new c}};E.assign(c.prototype,{child:jb(!1),children:jb(!0)});var kb=/[\n\t\r]/g,lb=function(b,c){var d="contains"===b?"hasClass":b+"Class";return g.classList&&(c=function(a,c){return a[0].classList[b](c)}),"hasClass"===d||"toggleClass"===d?function(b,e){if(this[0]){if("boolean"==typeof e&&"toggleClass"===d)return this[e?"addClass":"removeClass"](b),e;if("string"!=typeof b)throw new a(d);return c(this,b)}}:function(){var b,e,f=arguments;if(this[0]){b=0,e=f.length;for(var g;e>b;){if(g=f[b++],"string"!=typeof g)throw new a(d);c(this,g)}b=e=void 0}return this}};E.assign(c.prototype,{hasClass:lb("contains",function(a,b){return(" "+a[0].className+" ").replace(kb," ").indexOf(" "+b+" ")>=0}),addClass:lb("add",function(a,b){a.hasClass(b)||(a[0].className+=" "+b)}),removeClass:lb("remove",function(a,b){a[0].className=(" "+a[0].className+" ").replace(kb," ").replace(" "+b+" "," ").trim()}),toggleClass:lb("toggle",function(a,b){var c=a.hasClass(b);return c?a.removeClass(b):a[0].className+=" "+b,!c})}),c.prototype.clone=function(){var b=arguments[0];if(void 0===b&&(b=!0),"boolean"!=typeof b)throw new a("clone");var d,e=this[0];return e?k?d=new c(e.cloneNode(b)):(d=o.create(e.outerHTML),b||d.set("innerHTML","")):d=new c,d},c.prototype.contains=function(b){var d=this[0];if(!d)return!1;if(b instanceof c){var e=b[0];return e===d?!0:d.contains?d.contains(e):16&d.compareDocumentPosition(e)}throw new a("contains")},c.prototype.css=function(b,c){var d,e,f,g,h=this,i=arguments.length,j=this[0],k=typeof b;if(1===i&&("string"===k||E.isArray(b)))return j&&(d=j.style,c=("string"===k?[b]:b).reduce(function(a,b){return e=M.get[b],c=e?e(d):d[b],f||c||(d=E.computeStyle(j),c=e?e(d):d[b],f=!0),a[b]=c,a},{})),j&&"string"===k?c[b]:c;if(j)if(d=j.style,g=function(a,b){var c=M.set[a];"function"==typeof b&&(b=b.call(h,h.css(a))),null==b&&(b=""),c?c(d,b):d[a]="number"==typeof b?b+"px":b.toString()},1===i&&b&&"object"===k)E.keys(b).forEach(function(a){g(a,b[a])});else{if(2!==i||"string"!==k)throw new a("css");g(b,c)}return this};var mb=f.getElementsByClassName?/^(?:(\w+)|\.([\w\-]+))$/:/^(?:(\w+))$/,nb=/'|\\/g,ob="DOM"+Date.now(),pb=function(b){return function(d){if("string"!=typeof d)throw new a("find"+b);var e,f,g,h,i=this[0],j=mb.exec(d);if(!i)return b?[]:new c;if(j)e=j[1]?i.getElementsByTagName(d):i.getElementsByClassName(j[2]),e&&!b&&(e=e[0]);else{f=!0,g=ob,h=i,this!==o&&((f=i.getAttribute("id"))?g=f.replace(nb,"\\$&"):i.setAttribute("id",g),g="[id='"+g+"'] ",d=g+d.split(",").join(","+g));try{e=h["querySelector"+b](d)}finally{f||i.removeAttribute("id")}}return b?E.map.call(e,c):c(e)}};E.assign(c.prototype,{find:pb(""),findAll:pb("All")});var qb={};"onfocusin"in g?(qb.focus=function(a){a._type="focusin"},qb.blur=function(a){a._type="focusout"}):qb.focus=qb.blur=function(a){a.capturing=!0},f.createElement("input").validity&&(qb.invalid=function(a){a.capturing=!0}),k||["submit","change","reset"].forEach(function(a){qb[a]=function(a){a._type=m}});var rb=qb,sb=function(a,b,d,h,i,j){if(!i[0])return null;var l=i[0],n=rb[a],o=T(b,l),p=function(b){if(b=b||e.event,sb.skip!==a&&(p._type!==m||b.srcUrn===a)){var n=b.target||b.srcElement||f,q=o?o(n):l,r=b._args||[],s=h||[],t=d;"function"==typeof t&&q&&(j&&i.off(a,d),s=s.map(function(d){if("number"==typeof d)return r[d-1];if(!k)switch(d){case"which":return b.keyCode;case"button":var e=b.button;return 1&e?1:2&e?3:4&e?2:0;case"pageX":return b.clientX+g.scrollLeft-g.clientLeft;case"pageY":return b.clientY+g.scrollTop-g.clientTop}switch(d){case"type":return a;case"defaultPrevented":return"defaultPrevented"in b?b.defaultPrevented:b.returnValue===!1;case"target":return c(n);case"currentTarget":return c(q);case"relatedTarget":return c(b.relatedTarget||b[(b.toElement===l?"from":"to")+"Element"])}return b[d]}),t.apply(i,h?s:r.concat(s))===!1&&(k?b.preventDefault():b.returnValue=!1))}};return n&&(p=n(p,a)||p),k||"on"+(p._type||a)in l||(p._type=m),p.type=b?a+" "+b:a,p.callback=d,p},tb=sb;c.prototype.fire=function(b){var c,e,g,h=d.call(arguments,1),i=this[0],j=typeof b,l={};if(!i)return!1;if("string"!==j)throw new a("fire");return(c=rb[b])&&(l=c(l)||l),j=l._type||b,k?(e=f.createEvent("HTMLEvents"),e.initEvent(j,!0,!0),e._args=h,g=i.dispatchEvent(e)):(e=f.createEventObject(),e._args=h,"on"+j in i||(j=m),j===m&&(e.srcUrn=b),i.fireEvent("on"+j,e),g=e.returnValue!==!1),g&&i[b]&&("focus"!==b&&"blur"!==b||i.offsetWidth)&&(tb.skip=b,i[b](),tb.skip=null),g};var ub={get:{},set:{}};"tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" ").forEach(function(a){ub.get[a.toLowerCase()]=function(b){return b[a]}}),ub.get.style=function(a){return a.style.cssText},ub.set.style=function(a,b){a.style.cssText=b},ub.get.title=function(a){return a===g?f.title:a.title},ub.set.title=function(a,b){(a===g?f:a).title=b},ub.get.undefined=function(a){var b;switch(a.tagName){case"SELECT":return~a.selectedIndex?a.options[a.selectedIndex].value:"";case"OPTION":b=a.hasAttribute("value")?"value":"text";break;default:b=a.type&&"value"in a?"value":"innerHTML"}return a[b]},ub.set.value=function(a,b){"SELECT"===a.tagName?E.every.call(a.options,function(a){return!(a.selected=a.value===b)})&&(a.selectedIndex=-1):a[k||"textarea"!==a.type?"value":"innerText"]=b},ub.get.type=function(a){return a.getAttribute("type")||a.type},k||(ub.get.textContent=function(a){return a.innerText},ub.set.textContent=function(a,b){a.innerText=b});var vb=ub;c.prototype.get=function(b){var c,d,e=this,f=this._,g=this[0],h=vb.get[b],i=typeof b;if(g){if(h)return h(g,b);if("string"===i){if("_"===b[0]){if(c=b.substr(1),c in f)d=f[c];else if(c=c.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()}),d=g.getAttribute("data-"+c),null!=d){if("{"===d[0]&&"}"===d[d.length-1])try{d=JSON.parse(d)}catch(j){}f[c]=d}return d}return b in g?g[b]:g.getAttribute(b)}if(E.isArray(b))return b.reduce(function(a,b){return a[b]=e.get(b),a},{});throw new a("get")}};var wb=function(b,d,e,g){return function(){var h=arguments[0];void 0===h&&(h="");var i=this[0];if(!(e||i.parentNode&&h!==o))return this;if("function"==typeof h&&(h=h.call(this)),"string"==typeof h)h&&(h=d?h.trim():o.create(h)[0]);else if(h instanceof c)h=h[0];else{if(!E.isArray(h))throw new a(b);h=h.reduce(function(a,b){return a.appendChild(b[0]),a},f.createDocumentFragment())}return h&&"string"==typeof h?i.insertAdjacentHTML(d,h):(h||!d)&&g(i,h),this}};E.assign(c.prototype,{after:wb("after","afterend",!1,function(a,b){a.parentNode.insertBefore(b,a.nextSibling)}),before:wb("before","beforebegin",!1,function(a,b){a.parentNode.insertBefore(b,a)}),prepend:wb("prepend","afterbegin",!0,function(a,b){a.insertBefore(b,a.firstChild)}),append:wb("append","beforeend",!0,function(a,b){a.appendChild(b)}),replace:wb("replace","",!1,function(a,b){a.parentNode.replaceChild(b,a)}),remove:wb("remove","",!1,function(a){a.parentNode.removeChild(a)})});var xb={};xb[":focus"]=function(a){return a===f.activeElement},xb[":hidden"]=function(a){if("true"===a.getAttribute("aria-hidden"))return!0;var b=E.computeStyle(a);return"hidden"===b.visibility||"none"===b.display||!g.contains(a)},xb[":visible"]=function(a){return!xb[":hidden"](a)};var yb=xb;c.prototype.matches=function(b){if(!b||"string"!=typeof b)throw new a("matches");var c=yb[b]||T(b),d=this[0];return d&&!!c(d,this)},c.prototype.off=function(b,c){if("string"!=typeof b)throw new a("off");var d=this[0];return d&&(this._._handlers=this._._handlers.filter(function(a){return b!==a.type||c&&c!==a.callback?!0:(b=a._type||a.type,void(k?d.removeEventListener(b,a,!!a.capturing):d.detachEvent("on"+b,a)))})),this},c.prototype.offset=function(){var a,b=this[0],c=g.clientTop,d=g.clientLeft,f=e.pageYOffset||g.scrollTop,h=e.pageXOffset||g.scrollLeft;return b?(a=b.getBoundingClientRect(),{top:a.top+f-c,left:a.left+h-d,right:a.right+h-d,bottom:a.bottom+f-c,width:a.right-a.left,height:a.bottom-a.top}):void 0};var zb=function(b){return function(c,d,e,f){var g=this;if("string"==typeof c){"function"==typeof e&&(f=e,"string"==typeof d?e=null:(e=d,d=null)),"function"==typeof d&&(f=d,d=null,e=null);var h=this[0],i=tb(c,d,f,e,this,"once"===b);i&&(k?h.addEventListener(i._type||c,i,!!i.capturing):h.attachEvent("on"+(i._type||c),i),this._._handlers.push(i))}else{if("object"!=typeof c)throw new a(b);E.isArray(c)?c.forEach(function(a){g[b](a,d,e,f)}):E.keys(c).forEach(function(a){g[b](a,c[a])})}return this}};E.assign(c.prototype,{on:zb("on"),once:zb("once")}),c.prototype.set=function(b,c){var d=this,e=this[0];if(!e)return this;1===arguments.length&&"object"!=typeof b&&(c="function"==typeof b?b:null==b?"":String(b),b="value"in e?"value":"innerHTML");var f,g=vb.set[b],h=this._._watchers[b];if((h||"function"==typeof c)&&(f=this.get(b)),"string"==typeof b)"_"===b[0]?this._[b.substr(1)]=c:("function"==typeof c&&(c=c.call(this,f)),g?g(e,c):null==c?e.removeAttribute(b):b in e?e[b]=c:e.setAttribute(b,c),(!k||j)&&(e.className=e.className));else if(E.isArray(b))b.forEach(function(a){d.set(a,c)});else{if("object"!=typeof b)throw new a("set");E.keys(b).forEach(function(a){d.set(a,b[a])})}return h&&f!==c&&h.forEach(function(a){E.defer(function(){a.call(d,c,f)})}),this};var Ab=function(b,d,e){return function(f){if(f&&"string"!=typeof f)throw new a(b);var g=T(f),h=e?[]:null,i=this[0];for(i=i&&i[d];i;i=i[d])if(1===i.nodeType&&(!g||g(i))){if(!e)break;h.push(i)}return e?E.map.call(h,c):c(i)}};E.assign(c.prototype,{next:Ab("next","nextSibling"),prev:Ab("prev","previousSibling"),nextAll:Ab("nextAll","nextSibling",!0),prevAll:Ab("prevAll","previousSibling",!0),parent:Ab("parent","parentNode")});var Bb=!j&&!i,Cb=["timing-function","property","duration","delay"].map(function(a){return"transition-"+a}),Db=l?"webkitTransitionEnd":"transitionend",Eb=l?"webkitAnimationEnd":"animationend",Fb=function(a){var b=parseFloat(a)||0;return b&&"ms"!==a.slice(-2)?1e3*b:b},Gb=function(a){var b=M.get["transition-delay"](a).split(","),c=M.get["transition-duration"](a).split(",");return Math.max.apply(Math,c.map(function(a,c){return Fb(a)+(Fb(b[c])||0)}))},Hb=function(a,b,c,d,e){var f=Gb(c);if(!f)return!1;var g,h;return h=Cb.map(function(a,b){return M.get[a](c).split(b?", ":/, (?!\d)/)}),g=h[1].indexOf("visibility"),0>g&&(g=h[2].indexOf("0s")),0>g&&(g=h[0].length),h[0][g]="linear",h[1][g]="visibility",h[d?2:3][g]="0s",h[d?3:2][g]=f+"ms",h.forEach(function(a,c){M.set[Cb[c]](b,a.join(", "))}),a.addEventListener(Db,function i(c){"visibility"===c.propertyName&&(c.stopPropagation(),a.removeEventListener(Db,i,!0),b.willChange="",e())},!0),b.visibility=d?"inherit":"hidden",b.willChange=h[1].join(", "),!0},Ib=function(a,b,c,d,e,f){var g=Fb(M.get["animation-duration"](c));return g?(a.addEventListener(Eb,function h(c){c.animationName===d&&(c.stopPropagation(),a.removeEventListener(Eb,h,!0),M.set["animation-name"](b,""),f())},!0),M.set["animation-direction"](b,e?"normal":"reverse"),M.set["animation-name"](b,d),!0):!1},Jb=function(b,c){return function(d,e){var f=this,g=this[0];if("string"!=typeof d&&(e=d,d=null),e&&"function"!=typeof e)throw new a(b);if(!g)return this;var h,i=g.style,j=E.computeStyle(g),k=j.visibility,l=c,m=function(){String(l)===g.getAttribute("aria-hidden")&&(l&&d&&(i.visibility="hidden"),e&&e.call(f))};return"boolean"!=typeof l&&(l="hidden"!==k&&"true"!==g.getAttribute("aria-hidden")),Bb&&(l||(k=g.offsetWidth),h=d?Ib(g,i,j,d,l,m):Hb(g,i,j,l,m)),i.visibility=l&&!d?"hidden":"inherit",this.set("aria-hidden",String(l)),h||m(),this}};E.assign(c.prototype,{show:Jb("show",!1),hide:Jb("hide",!0),toggle:Jb("toggle")}),c.prototype.watch=function(a,b){var c=this._._watchers;return c[a]||(c[a]=[]),c[a].push(b),this},c.prototype.unwatch=function(a,b){var c=this._._watchers;return c[a]&&(c[a]=c[a].filter(function(a){return a!==b})),this}}();