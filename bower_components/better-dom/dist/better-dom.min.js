/**
 * @file better-dom.js
 * @overview better-dom: Live extension playground
 * @version 2.1.0-beta.2 Sun, 30 Nov 2014 12:47:27 GMT
 * @copyright 2013-2014 Maksim Chemerisuk
 * @license MIT
 * @see https://github.com/chemerisuk/better-dom
 */
!function(){"use strict";function a(){}function b(c){if(!(this instanceof b)){if(c){var d=c[s];return d?d:new b(c)}return new a}c&&(this[0]=c,c[s]=this,this._={},this._[t]=[],this._[u]={},this._[v]=[],this._[x]={})}function c(a){a&&9===a.nodeType&&(a=a.documentElement),b.call(this,a)}function d(a,b){var c=arguments[2];void 0===c&&(c="$Element");var d="http://chemerisuk.github.io/better-dom/"+c+".html#"+a,e="invalid call `"+c+("DOM"===c?".":"#")+a+"(";e+=A.map.call(b,function(a){return String(a)}).join(", ")+")`;",this.message=e+" check "+d+" to verify the function arguments"}function e(a,b){d.call(this,a,b,"DOM")}function f(a,c,d,e,f,g){if("number"==typeof a){var h=c["__2001000-beta002__"];return h?h[a]:void 0}if(9>o){var i=e.ownerDocument.documentElement;switch(a){case"which":return c.keyCode;case"button":var j=c.button;return 1&j?1:2&j?3:4&j?2:0;case"pageX":return c.clientX+i.scrollLeft-i.clientLeft;case"pageY":return c.clientY+i.scrollTop-i.clientTop;case"preventDefault":return function(){return c.returnValue=!1};case"stopPropagation":return function(){return c.cancelBubble=!0}}}switch(a){case"type":return d;case"defaultPrevented":return"defaultPrevented"in c?c.defaultPrevented:c.returnValue===!1;case"target":return b(f);case"currentTarget":return b(g);case"relatedTarget":return b(c.relatedTarget||c[(c.toElement===e?"from":"to")+"Element"])}var k=c[a];return"function"==typeof k?function(){return k.apply(c,arguments)}:k}function g(a,b,c,d,e,h){var i=e[0],k=fb[a],l=S(b,i),m=function(b){if(b=b||j.event,g.skip!==a&&(m._type!==r||b.srcUrn===a)){var k=b.target||b.srcElement||i.ownerDocument,n=l?l(k):i,p=d||[];n&&(h&&e.off(a,c),p=d?p.map(function(c){return f(c,b,a,i,k,n)}):A.slice.call(b["__2001000-beta002__"]||[0],1),c.apply(e,p)===!1&&(9>o?b.returnValue=!1:b.preventDefault()))}};return k&&(m=k(m,a)||m),9>o&&!("on"+(m._type||a)in i)&&(m._type=r),m.type=a,m.callback=c,m.selector=b,m}function h(a){Gb.forEach(function(b){b(a,!0)}),A.each.call(a.children,h)}var i=Array.prototype.slice,j=window,k=document,l=k.documentElement,m=j.navigator.userAgent,n=j.ScriptEngineMajorVersion,o=n&&n(),p=~m.indexOf("Android")&&m.indexOf("Chrome")<0,q=j.WebKitAnimationEvent?"-webkit-":"",r="dataavailable",s="__2001000-beta002__",t="handlers2001000-beta002",u="watchers2001000-beta002",v="extensions2001000-beta002",w="frame2001000-beta002",x="context2001000-beta002";b.prototype={constructor:function(a){return b(a&&1===a.nodeType?a:null)},toString:function(){var a=this[0];return a?"<"+a.tagName.toLowerCase()+">":""},version:"2.1.0-beta.2"},a.prototype=new b,c.prototype=new b;var y=new c(k),z=Array.prototype,A={computeStyle:function(a){return 9>o?a.currentStyle:j.getComputedStyle(a)},injectElement:function(a){return a&&1===a.nodeType?a.ownerDocument.getElementsByTagName("head")[0].appendChild(a):void 0},every:z.every,each:z.forEach,filter:z.filter,map:z.map,slice:z.slice,isArray:Array.isArray,keys:Object.keys,safeInvoke:function(a,b,c,d){"string"==typeof b&&(b=a[b]);try{return b.call(a,c,d)}catch(e){return j.setTimeout(function(){throw e},1),!1}},register:function(c,d){d=d||function(){},Object.keys(c).forEach(function(e){var f=d(e)||function(){return this};b.prototype[e]=c[e],a.prototype[e]=f})},getLegacyFile:function(a){if(10>o){var b=z.filter.call(k.scripts,function(a){return a.src.indexOf("better-dom-legacy.js")>=0});if(b.length<1)throw new Error("In order to use live extensions in IE < 10 you have to include extra files. See https://github.com/chemerisuk/better-dom#notes-about-old-ies for details.");return b[0].src.replace(".js","."+a)}}};d.prototype=new TypeError,e.prototype=new TypeError;var B={"(":1,")":2,"^":3,">":4,"+":5,"*":6,"`":7,"[":8,".":8,"#":8},C=/`[^`]*`|\[[^\]]*\]|\.[^()>^+*`[#]+|[^()>^+*`[#.]+|\^+|./g,D=/\s*([\w\-]+)(?:=((?:`([^`]*)`)|[^\s]*))?/g,E=/(\$+)(?:@(-)?(\d+)?)?/g,F=/\./g,G=/\$/g,H={"":""},I=function(a,b,c,d){var e=c&&c.indexOf('"')>=0?"'":'"';return"string"==typeof d?c=d:"string"!=typeof c&&(c=b)," "+b+"="+e+c+e},J=function(a,b){return function(c){var d=b?c.lastIndexOf("<"):c.indexOf(">");return c.slice(0,d)+a+c.slice(d)}},K=function(a){return H[a]||(H[a]="<"+a+"></"+a+">")},L=function(a,b){var c,d=Array(a);for(c=0;a>c;++c)d[c]=b.replace(E,function(b,d,e,f){var g=(e?a-c-1:c)+(f?+f:1);return(d+g).slice(-d.length).replace(G,"0")});return d},M=/[&<>"']/g,N={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};"area base br col hr img input link meta param command keygen source".split(" ").forEach(function(a){H[a]="<"+a+">"}),y.emmet=function(a,b){var c,d,f;if("string"!=typeof a)throw new e("emmet",arguments);if(b&&(a=y.format(a,b)),a in H)return H[a];var g=[],h=[];f=a.match(C),c=0,d=f.length;for(var i;d>c;){i=f[c++];var j=i[0],k=B[j];if(k){if("("!==i)for(var l=0,m="^"===j?i.length:1;m>l;++l)for(;g[0]!==j&&B[g[0]]>=k;){var n=g.shift();if(h.push(n),"^"===j&&">"===n)break}")"===i?g.shift():(("["===j||"`"===j)&&h.push(i.slice(1,-1)),"."===j&&h.push(i.slice(1).replace(F," ")),g.unshift(j))}else h.push(i)}c=d=f=void 0,h=h.concat(g),g=[],c=0,d=h.length;for(var o;d>c;){if(o=h[c++],o in B){var p=g.shift(),q=g.shift();switch("string"==typeof q&&(q=[K(q)]),o){case".":p=J(' class="'+p+'"');break;case"#":p=J(' id="'+p+'"');break;case"[":p=J(p.replace(D,I));break;case"*":q=L(+p,q.join(""));break;case"`":g.unshift(q),q=[p.replace(M,function(a){return N[a]})];break;default:p="string"==typeof p?K(p):p.join(""),">"===o?p=J(p,!0):q.push(p)}o="function"==typeof p?q.map(p):q}g.unshift(o)}return c=d=void 0,h=1===h.length?K(g[0]):g[0].join("")};var O=H,P=function(a){return function(c,d){var e=this[0].ownerDocument,f=e.createElement("div");return this["create"+a]=function(c,d){var g,h;if(c&&c in O)g=e.createElement(c),a&&(g=[new b(g)]);else for(c=c.trim(),c="<"===c[0]&&">"===c[c.length-1]?d?y.format(c,d):c:y.emmet(c,d),f.innerHTML=c,g=a?[]:null;h=f.firstChild;)if(f.removeChild(h),1===h.nodeType){if(!a){g=h;break}g.push(new b(h))}return a?g:b(g)},this["create"+a](c,d)}};c.prototype.create=P(""),c.prototype.createAll=P("All"),c.prototype.importScripts=function(){var a=i.call(arguments,0),b=this[0].ownerDocument,c=function(){var d,f=a.shift(),g=typeof f;if("string"===g)d=b.createElement("script"),d.src=f,d.onload=c,d.async=!0,A.injectElement(d);else if("function"===g)f();else if(f)throw new e("importScripts",arguments)};c()},c.prototype.importStyles=function(a,b){var c=this[0].ownerDocument,d=A.injectElement(c.createElement("style")),f=d.sheet||d.styleSheet,g=f.cssRules||f.rules;return this.importStyles=function(a,b){if("string"!=typeof a||"string"!=typeof b)throw new e("importStyles",arguments);a.split(",").forEach(function(a){try{f.cssRules?f.insertRule(a+"{"+b+"}",g.length):"@"!==a[0]?f.addRule(a,b):f.cssText+=a+"{"+b+"}"}catch(c){}})},this.importStyles(a,b)};var Q=/^(\w*)(?:#([\w\-]+))?(?:\[([\w\-\=]+)\])?(?:\.([\w\-]+))?$/,R="m oM msM mozM webkitM".split(" ").reduce(function(a,b){var c=b+"atchesSelector";return a||l[c]&&c},null),S=function(a,b){if("string"!=typeof a)return null;var c=Q.exec(a);return c&&(c[1]&&(c[1]=c[1].toLowerCase()),c[3]&&(c[3]=c[3].split("=")),c[4]&&(c[4]=" "+c[4]+" ")),function(d){var e,f,g,h;for(c||R||(h=(b||k).querySelectorAll(a));d&&1===d.nodeType;d=d.parentNode){if(c)g=!(c[1]&&d.nodeName.toLowerCase()!==c[1]||c[2]&&d.id!==c[2]||c[3]&&(c[3][1]?d.getAttribute(c[3][0])!==c[3][1]:!d.hasAttribute(c[3][0]))||c[4]&&!((" "+d.className+" ").indexOf(c[4])>=0));else if(R)g=d[R](a);else{e=0,f=h.length;for(var i;f>e;)if(i=h[e++],i===d)return i;e=f=void 0}if(g||!b||d===b)break}return g&&d}},T=function(a){return function(c){if(a){if(c&&"string"!=typeof c)throw new d("children",arguments)}else if(c&&"number"!=typeof c)throw new d("child",arguments);var e=this[0],f=S(c),g=e.children;return 9>o&&(g=A.filter.call(g,function(a){return 1===a.nodeType})),a?(f&&(g=A.filter.call(g,f)),A.map.call(g,b)):(0>c&&(c=g.length+c),b(g[c]))}};A.register({child:T(!1),children:T(!0)},function(b){return"child"===b?function(){return new a}:function(){return[]}});var U=/[\n\t\r]/g,V=function(a,b){var c="contains"===a?"hasClass":a+"Class";return l.classList&&(b=function(b,c){return b[0].classList[a](c)}),"hasClass"===c||"toggleClass"===c?function(a,e){if("boolean"==typeof e&&"toggleClass"===c)return this[e?"addClass":"removeClass"](a),e;if("string"!=typeof a)throw new d(c,arguments);return b(this,a)}:function(){var a,e,f=arguments;a=0,e=f.length;for(var g;e>a;){if(g=f[a++],"string"!=typeof g)throw new d(c,arguments);b(this,g)}return a=e=void 0,this}};A.register({hasClass:V("contains",function(a,b){return(" "+a[0].className+" ").replace(U," ").indexOf(" "+b+" ")>=0}),addClass:V("add",function(a,b){a.hasClass(b)||(a[0].className+=" "+b)}),removeClass:V("remove",function(a,b){a[0].className=(" "+a[0].className+" ").replace(U," ").replace(" "+b+" "," ").trim()}),toggleClass:V("toggle",function(a,b){var c=a.hasClass(b);return c?a.removeClass(b):a[0].className+=" "+b,!c})},function(a){return"hasClass"===a||"toggleClass"===a?function(){return!1}:void 0}),A.register({clone:function(a){if("boolean"!=typeof a)throw new d("clone",arguments);var c,e=this[0];return 9>o?(c=y.create(e.outerHTML),a||c.set("")):c=new b(e.cloneNode(a)),c}},function(){return function(){return new a}}),A.register({contains:function(a){var c=this[0];if(a instanceof b){var e=a[0];return e===c?!0:c.contains?c.contains(e):16&c.compareDocumentPosition(e)}throw new d("contains",arguments)}},function(){return function(){return!1}});var W=9>o?A.getLegacyFile("html"):"about:blank";A.register({context:function(a,d){var e=this[0],f=e.ownerDocument,g=this._[x];if(a in g)return g[a];var h,i=f.createElement("div"),j=function(){var b=h.contentDocument;b.body.style.margin=0,i.className=a,"function"==typeof d&&d(new c(b))};return 9>o?(i.innerHTML=y.emmet("object[data=`{0}` type=`text/html` style=`left:-2px;top:-2px`]",[W]),h=i.firstChild,y.requestFrame(function k(){var a;try{a=h.contentDocument.documentElement}catch(b){return y.requestFrame(k)}i.onresize=function c(){i.onresize=null,h.width=i.offsetWidth+4,h.height=i.offsetHeight+4,y.requestFrame(function(){i.onresize=c})},j()})):(h=f.createElement("object"),h.type="text/html",h.data=W,h.onload=j,i.appendChild(h)),i.style.overflow="hidden",h.style.position="absolute",h.width="100%",h.height="100%",e.parentNode.insertBefore(i,e),g[a]=new b(i)}});var X=/\-./g,Y=["Webkit","O","Moz","ms"],Z={get:{},set:{},find:function(a,b){var c=a.replace(X,function(a){return a[1].toUpperCase()});return c in b||(c=Y.map(function(a){return a+c[0].toUpperCase()+c.slice(1)}).filter(function(a){return a in b})[0]),this.get[a]=this.set[a]=c}},$=["Top","Right","Bottom","Left"],_={font:["fontStyle","fontSize","/","lineHeight","fontFamily"],padding:$.map(function(a){return"padding"+a}),margin:$.map(function(a){return"margin"+a}),"border-width":$.map(function(a){return"border"+a+"Width"}),"border-style":$.map(function(a){return"border"+a+"Style"})};" float fill-opacity font-weight line-height opacity orphans widows z-index zoom ".split(" ").forEach(function(a){var b=a.replace(X,function(a){return a[1].toUpperCase()});"float"===a?(b="cssFloat"in l.style?"cssFloat":"styleFloat",Z.get[a]=Z.set[a]=b):(Z.get[a]=b,Z.set[a]=function(a,c){c[b]=a.toString()})}),A.keys(_).forEach(function(a){var b=_[a];Z.get[a]=function(a){var c=[],d=function(b,d){return c.push("/"===b?b:a[b]),!c[d]};return b.some(d)?"":c.join(" ")},Z.set[a]=function(c,d){c&&"cssText"in d?d.cssText+=";"+a+":"+c:b.forEach(function(a){return d[a]="number"==typeof c?c+"px":c.toString()})}});var ab=Z;A.register({css:function(a,b){var c,e=this,f=arguments.length,g=this[0],h=g.style;if(1===f&&("string"==typeof a||A.isArray(a))){var i=function(a){var b=ab.get[a]||ab.find(a,h),d="function"==typeof b?b(h):h[b];return d||(c||(c=A.computeStyle(g)),d="function"==typeof b?b(c):c[b]),d};return"string"==typeof a?i(a):a.map(i).reduce(function(b,c,d){return b[a[d]]=c,b},{})}if(2===f&&"string"==typeof a){var j=ab.set[a]||ab.find(a,h);"function"==typeof b&&(b=b.call(this,this.css(a))),null==b&&(b=""),"function"==typeof j?j(b,h):h[j]="number"==typeof b?b+"px":b.toString()}else{if(1!==f||!a||"object"!=typeof a)throw new d("css",arguments);A.keys(a).forEach(function(b){e.css(b,a[b])})}return this}},function(){return function(a){return 1===arguments.length&&A.isArray(a)?{}:1!==arguments.length||"string"!=typeof a?this:void 0}}),A.register({define:function(a,b,c){var e=this,f=this[0];if("string"!=typeof a||"function"!=typeof b||"function"!=typeof c)throw new d("define",arguments);var g=f.getAttribute(a),h=9>o?"toUpperCase":"toLowerCase",i=a[h](),j=f.setAttribute,k=f.removeAttribute;return Object.defineProperty(f,a,{get:function(){var a=f.getAttribute(i,1);return b.call(e,a)},set:function(a){var b=c.call(e,a);null==b?k.call(f,i,1):j.call(f,i,b,1)}}),f.setAttribute=function(c,d,g){a===c[h]()?f[a]=b.call(e,d):j.call(f,c,d,g)},f.removeAttribute=function(c,d){a===c[h]()?f[a]=b.call(e,null):k.call(f,c,d)},f[a]=b.call(this,g),this}});var bb=k.getElementsByClassName?/^(?:(\w+)|\.([\w\-]+))$/:/^(?:(\w+))$/,cb=/'|\\/g,db=function(a){return function(c){if("string"!=typeof c)throw new d("find"+a,arguments);var e,f,g,h,i=this[0],j=bb.exec(c);return j?(e=j[1]?i.getElementsByTagName(c):i.getElementsByClassName(j[2]),e&&!a&&(e=e[0])):(f=!0,g="DOM2001000-beta002",h=i,i!==i.ownerDocument.documentElement&&((f=i.getAttribute("id"))?g=f.replace(cb,"\\$&"):i.setAttribute("id",g),g="[id='"+g+"'] ",c=g+c.split(",").join(","+g)),e=A.safeInvoke(h,"querySelector"+a,c),f||i.removeAttribute("id")),a?A.map.call(e,b):b(e)}};A.register({find:db(""),findAll:db("All")},function(b){return"find"===b?function(){return new a}:function(){return[]}});var eb={};"onfocusin"in k.documentElement?(eb.focus=function(a){a._type="focusin"},eb.blur=function(a){a._type="focusout"}):eb.focus=eb.blur=function(a){a.capturing=!0},k.createElement("input").validity&&(eb.invalid=function(a){a.capturing=!0}),9>o&&["submit","change","reset"].forEach(function(a){eb[a]=function(a){a._type="_"}});var fb=eb,gb=g;A.register({fire:function(a){var b,c,e,f=this[0];if("string"!=typeof a)throw new d("fire",arguments);var g=fb[a],h={};return g&&(h=g(h)||h),c=h._type||a,9>o?(b=f.ownerDocument.createEventObject(),b["__2001000-beta002__"]=arguments,"on"+c in f||(c=r),c===r&&(b.srcUrn=a),f.fireEvent("on"+c,b),e=b.returnValue!==!1):(b=f.ownerDocument.createEvent("HTMLEvents"),b["__2001000-beta002__"]=arguments,b.initEvent(c,!0,!0),e=f.dispatchEvent(b)),e&&f[a]&&(gb.skip=a,A.safeInvoke(f,a),gb.skip=null),e}},function(){return function(){return!0}});var hb={get:{},set:{}},ib=k.createElement("body");"tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" ").forEach(function(a){hb.get[a.toLowerCase()]=function(b){return b[a]}}),hb.get.style=function(a){return a.style.cssText},hb.set.style=function(a,b){a.style.cssText=b},hb.get.title=function(a){var b=a.ownerDocument;return a===b.documentElement?b.title:a.title},hb.set.title=function(a,b){var c=a.ownerDocument;(a===c.documentElement?c:a).title=b},hb.get.undefined=function(a){var b;switch(a.tagName){case"SELECT":return~a.selectedIndex?a.options[a.selectedIndex].value:"";case"OPTION":b=a.hasAttribute("value")?"value":"text";break;default:b=a.type&&"value"in a?"value":"innerHTML"}return a[b]},hb.set.value=function(a,b){"SELECT"===a.tagName?A.every.call(a.options,function(a){return!(a.selected=a.value===b)})&&(a.selectedIndex=-1):a[9>o&&"textarea"===a.type?"innerText":"value"]=b},hb.get.type=function(a){return a.getAttribute("type")||a.type},9>o&&(hb.get.textContent=function(a){return a.innerText},hb.set.textContent=function(a,b){a.innerText=b},hb.set.innerHTML=function(a,b){try{a.innerHTML=b}catch(c){a.innerText="",ib.innerHTML=b;for(var d;d=ib.firstChild;)a.appendChild(d)}});var jb=hb,kb=/[A-Z]/g,lb=function(a,b){b=b.replace(kb,function(a){return"-"+a.toLowerCase()});var c=a.getAttribute("data-"+b);if(null!=c&&"{"===c[0]&&"}"===c[c.length-1])try{c=JSON.parse(c)}catch(d){}return c};A.register({get:function(a){var b=this,c=this[0],e=jb.get[a];if(e)return e(c,a);if("string"==typeof a){if(a in c)return c[a];if("_"!==a[0])return c.getAttribute(a);var f=a.slice(1),g=this._;return f in g||(g[f]=lb(c,f)),g[f]}if(A.isArray(a))return a.reduce(function(a,c){return a[c]=b.get(c),a},{});throw new d("get",arguments)}},function(){return function(){return void 0}});var mb=function(a,c,d,e){return function(){var a=i.call(arguments,0),f=this,g=this[0];if(d&&!g.parentNode)return this;var h=c?"":g.ownerDocument.createDocumentFragment();return a.forEach(function(a){"function"==typeof a&&(a=a.call(f)),"string"==typeof a?"string"==typeof h?h+=a.trim():a=y.createAll(a):a instanceof b&&(a=[a]),A.isArray(a)&&("string"==typeof h&&(a=y.createAll(h).concat(a),h=g.ownerDocument.createDocumentFragment()),a.forEach(function(a){h.appendChild(a[0])}))}),"string"==typeof h?g.insertAdjacentHTML(c,h):e(g,h),this}};A.register({after:mb("after","afterend",!0,function(a,b){a.parentNode.insertBefore(b,a.nextSibling)}),before:mb("before","beforebegin",!0,function(a,b){a.parentNode.insertBefore(b,a)}),prepend:mb("prepend","afterbegin",!1,function(a,b){a.insertBefore(b,a.firstChild)}),append:mb("append","beforeend",!1,function(a,b){a.appendChild(b)}),replace:mb("replace","",!0,function(a,b){a.parentNode.replaceChild(b,a)}),remove:mb("remove","",!0,function(a){a.parentNode.removeChild(a)})}),A.register({map:function(a,b){if("function"!=typeof a)throw new d("map",arguments);return[a.call(b,this)]}},function(){return function(){return[]}});var nb=function(a){var b=A.computeStyle(a);return"hidden"===b.visibility||"none"===b.display},ob={":focus":function(a){return a===a.ownerDocument.activeElement},":visible":function(a){return!nb(a)},":hidden":nb};A.register({matches:function(a){if(!a||"string"!=typeof a)throw new d("matches",arguments);var b=ob[a]||S(a);return!!b(this[0])}},function(){return function(){return!1}}),A.register({off:function(a,b,c){if("string"!=typeof a)throw new d("off",arguments);void 0===c&&(c=b,b=void 0);var e=this[0];return this._[t]=this._[t].filter(function(d){var f=a!==d.type;return f=f||b&&b!==d.selector,(f=f||c&&c!==d.callback)?!0:(a=d._type||d.type,void(9>o?e.detachEvent("on"+a,d):e.removeEventListener(a,d,!!d.capturing)))}),this}}),A.register({offset:function(){var a=this[0],b=a.ownerDocument.documentElement,c=b.clientTop,d=b.clientLeft,e=j.pageYOffset||b.scrollTop,f=j.pageXOffset||b.scrollLeft,g=a.getBoundingClientRect();return{top:g.top+e-c,left:g.left+f-d,right:g.right+f-d,bottom:g.bottom+e-c,width:g.right-g.left,height:g.bottom-g.top}}},function(){return function(){return{top:0,left:0,right:0,bottom:0,width:0,height:0}}});var pb=function(a){return function(b,c,e,f){var g=this;if("string"==typeof b){if("function"==typeof e&&(f=e,"string"==typeof c?e=null:(e=c,c=null)),"function"==typeof c&&(f=c,c=null,e=null),"function"!=typeof f)throw new d(a,arguments);var h=this[0],i=gb(b,c,f,e,this,"once"===a);i&&(9>o?h.attachEvent("on"+(i._type||b),i):h.addEventListener(i._type||b,i,!!i.capturing),this._[t].push(i))}else{if("object"!=typeof b)throw new d(a,arguments);A.isArray(b)?b.forEach(function(b){g[a](b,c,e,f)}):A.keys(b).forEach(function(c){g[a](c,b[c])})}return this}};A.register({on:pb("on"),once:pb("once")}),A.register({set:function(a,b){var c=this,e=this[0];if(1===arguments.length&&(b="function"==typeof a?a:null==a?"":String(a),"[object Object]"!==b)){var f=e.tagName;a="INPUT"===f||"TEXTAREA"===f||"SELECT"===f||"OPTION"===f?"value":"innerHTML"}var g,h=jb.set[a],i=this._[u][a];if((i||"function"==typeof b)&&(g=this.get(a)),"string"==typeof a)"_"===a[0]?this._[a.slice(1)]=b:("function"==typeof b&&(b=b.call(this,g)),h?h(e,b):null==b?e.removeAttribute(a):a in e?e[a]=b:e.setAttribute(a,b),(9>o||p)&&(e.className=e.className));else if(A.isArray(a))a.forEach(function(a){c.set(a,b)});else{if("object"!=typeof a)throw new d("set",arguments);A.keys(a).forEach(function(b){c.set(b,a[b])})}return i&&g!==b&&i.forEach(function(a){A.safeInvoke(c,a,b,g)}),this}});var qb=function(a,c,e){return function(f){if(f&&"string"!=typeof f)throw new d(a,arguments);var g=S(f),h=e?[]:null,i=this[0];for("closest"===a&&g||(i=i[c]);i;i=i[c])if(1===i.nodeType&&(!g||g(i))){if(!e)break;h.push(i)}return e?A.map.call(h,b):b(i)}};A.register({next:qb("next","nextSibling"),prev:qb("prev","previousSibling"),nextAll:qb("nextAll","nextSibling",!0),prevAll:qb("prevAll","previousSibling",!0),closest:qb("closest","parentNode")},function(b){return"All"===b.slice(-3)?function(){return[]}:function(){return new a}});var rb=["timing-function","property","duration","delay"].map(function(a){return"transition-"+a}),sb=function(a){var b=parseFloat(a)||0;return b&&"ms"!==a.slice(-2)?1e3*b:b},tb=function(a){var b=a[3],c=a[2];return Math.max.apply(Math,c.map(function(a,c){return sb(a)+(sb(b[c])||0)}))};rb.concat("animation-duration").forEach(function(a){ab.find(a,l.style)});var ub=function(a,b,c,d,e){var f,g;if(p||10>o)return null;if(c){if(g=sb(b[ab.get["animation-duration"]]),!g)return;f=[q+"animation-direction:"+(d?"normal":"reverse"),q+"animation-name:"+c,"visibility:inherit"]}else{var h=rb.map(function(a,c){return b[ab.get[a]].split(c?", ":/, (?!\d)/)});if(g=tb(h),!g)return;if(h[1].indexOf("all")<0){var i=h[1].indexOf("visibility");0>i&&(i=h[2].indexOf("0s")),0>i&&(i=h[1].length),h[0][i]="linear",h[1][i]="visibility",h[d?2:3][i]="0s",h[d?3:2][i]=g+"ms"}f=h.map(function(a,b){for(var c=0,d=a.length;d>c;++c)a[c]=a[c]||a[c-1]||"initial";return q+rb[b]+":"+a.join(", ")}),f.push("visibility:"+(d?"hidden":"inherit"),"will-change:"+h[1].join(", "))}return{cssText:f.join(";"),initialCssText:a.style.cssText,handleEvent:function(b){if(b.target===a){if(c){if(b.animationName!==c)return}else if("visibility"!==b.propertyName)return;b.stopPropagation(),e()}}}},vb=q?"webkitTransitionEnd":"transitionend",wb=q?"webkitAnimationEnd":"animationend",xb=function(a,b){return function(c,e){var f=this;if("string"!=typeof c&&(e=c,c=null),e&&"function"!=typeof e)throw new d(a,arguments);var g=this[0],h=g.style,i=A.computeStyle(g),j=b,k=this._[w],l=function(){m?(g.removeEventListener(n,m,!0),h.cssText=m.initialCssText):f.set("aria-hidden",String(j)),h.visibility=j?"hidden":"inherit",f._[w]=null,e&&e.call(f)};if("boolean"!=typeof j&&(j="hidden"!==i.visibility),k&&y.cancelFrame(k),g.ownerDocument.documentElement.contains(g)){var m=ub(g,i,c,j,l),n=c?wb:vb;this._[w]=y.requestFrame(m?function(){g.addEventListener(n,m,!0),h.cssText=m.initialCssText+m.cssText,f.set("aria-hidden",String(j))}:l)}else l();return this}};A.register({show:xb("show",!1),hide:xb("hide",!0),toggle:xb("toggle")}),A.register({watch:function(a,b){var c=this._[u];return c[a]||(c[a]=[]),c[a].push(b),this},unwatch:function(a,b){var c=this._[u];return c[a]&&(c[a]=c[a].filter(function(a){return a!==b})),this}});var yb,zb=/^(?:on|do)[A-Z]/,Ab=function(a,c,d,e){var f=d.hasOwnProperty("constructor")&&d.constructor,g=S(a);return function(a,h){var i=b(a);if(!~i._[v].indexOf(e)&&g(a)&&(i._[v].push(e),h===!0||c(i)!==!1)){var j=Object.keys(d).filter(function(a){var b=d[a];return zb.exec(a)?(i[a]=function(){return b.apply(i,arguments)},!h):"constructor"!==a?(i[a]=b,!h&&"_"===a[0]):void 0});f&&A.safeInvoke(i,f),j.forEach(function(a){delete i[a]})}}},Bb=[],Cb=function(){return!0},Db=function(){return!1};if(y.extend=function(a,c,d){if(2===arguments.length&&(d=c,c=!0),"boolean"==typeof c&&(c=c?Cb:Db),"function"==typeof d&&(d={constructor:d}),!d||"object"!=typeof d||"function"!=typeof c)throw new e("extend",arguments);if("*"===a)A.keys(d).forEach(function(a){b.prototype[a]=d[a]});else{var f=Ab(a,c,d,Bb.length);Bb.push(f),A.each.call(k.querySelectorAll(a),f),y.importStyles(a,yb)}},10>o)yb="-ms-behavior:url("+A.getLegacyFile("htc")+") !important",k.attachEvent("on"+r,function(){var a=j.event;a.srcUrn===r&&Bb.forEach(function(b){b(a.srcElement)})});else{var Eb="DOM2001000-beta002",Fb=y.extend;yb=q+"animation-name:"+Eb+" !important;",yb+=q+"animation-duration:1ms !important",y.extend=function(){y.importStyles("@"+q+"keyframes "+Eb,"from {opacity:.99} to {opacity:1}"),(y.extend=Fb).apply(y,arguments)},k.addEventListener(q?"webkitAnimationStart":"animationstart",function(a){a.animationName===Eb&&(Bb.forEach(function(b){b(a.target)}),a.stopImmediatePropagation())},!0)}var Gb=Bb,Hb=/\{([\w\-]+)\}/g;y.format=function(a,b){return"string"!=typeof a&&(a=String(a)),b&&"object"==typeof b||(b={}),a.replace(Hb,function(a,c,d){return c in b&&(a=b[c],"function"==typeof a&&(a=a(d)),a=String(a)),a})};var Ib=j.requestAnimationFrame,Jb=j.cancelAnimationFrame,Kb=0;Ib&&Jb||["ms","moz","webkit","o"].forEach(function(a){Ib=Ib||j[a+"RequestAnimationFrame"],Jb=Jb||j[a+"CancelAnimationFrame"]}),y.requestFrame=function(a){if(Ib)return Ib.call(j,a);var b=Date.now(),c=Math.max(0,16-(b-Kb));return Kb=b+c,j.setTimeout(function(){a(b+c)},c)},y.cancelFrame=function(a){Jb?Jb.call(j,a):j.clearTimeout(a)},y.mock=function(b,c){if(!b)return new a;var d=y.create(b,c);return h(d[0]),d};var Lb=j.DOM;y.noConflict=function(){return j.DOM===y&&(j.DOM=Lb),y},j.DOM=y}();