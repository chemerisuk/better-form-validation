/**
 * better-form-validation: Form validation using better-dom
 * @version 1.5.0 Fri, 14 Oct 2016 08:26:37 GMT
 * @link https://github.com/chemerisuk/better-form-validation
 * @copyright 2016 Maksim Chemerisuk
 * @license MIT
 */
!function(t,e,i,r){"use strict";function n(t){var e=this;this.valid=!0,t&&"object"==typeof t&&Object.keys(t).forEach(function(i){var r=t[i];e[i]=r,r instanceof n?e.valid=e.valid&&r.valid:e.valid=e.valid&&!r.length})}var o={},a=[null,"file","image","submit","fieldset","reset","button","hidden"],s=function(t){return a.indexOf(t.get("type"))<0};o.required=/\S/,o.number=/^-?[0-9]*(\.[0-9]+)?$/,o.email=/^([a-z0-9_\.\-\+]+)@([\da-z\.\-]+)\.([a-z\.]{2,6})$/i,o.url=/^(https?:\/\/)?[\da-z\.\-]+\.[a-z\.]{2,6}[#&+_\?\/\w \.\-=]*$/i,o.tel=/^((\+\d{1,3}(-| )?\(?\d\)?(-| )?\d{1,5})|(\(?\d{2,6}\)?))(-| )?(\d{3,4})(-| )?(\d{4})(( x| ext)\d{1,5}){0,1}$/;var l=function(t){return function(e){return e=String(e).toLowerCase(),""===e||e===t.toLowerCase()}},d=function(){return function(t){return t?"":null}};t.extend("[name]",s,{constructor:function(){var t=this,e=this.get("type");"checkbox"!==e&&"radio"!==e&&this.on("input",this._checkValidity),this.on("change",this.reportValidity),"boolean"!=typeof this.get("required")&&["required","noValidate"].forEach(function(e){t.define(e,l(e),d(e))})},validity:function(a){var s=this;if(a!==r)this.set(e,a);else{var l=t.constructor(this.get("form"));if(null!=this.get("novalidate")||null!=l.get("novalidate"))return new n}a=this.get(e),"function"==typeof a&&(a=a.call(this)),"string"==typeof a&&(a=[a]),a=a||[];var d,f,u,c=this.get("type"),h=this.get("required");if(!a.length)switch(c){case"radio":if(!h)break;var m=this.closest("form").findAll("[name]"),v=function(t){return t.get("name")===s.get("name")&&t.get("checked")};if(m.some(v))break;case"checkbox":h&&!this.get("checked")&&a.push("field is required");break;default:var p=this.get("value");p&&(f=this.get("pattern"),f?(f="^(?:"+f+")$",f in o?d=o[f]:(d=new RegExp(f),o[f]=d),u=this.get("title")||"illegal value format"):(d=o[c],u=i[c])),h&&!d&&(d=o.required,u="field is required"),d&&!d.test(p)&&a.push(u)}return new n(a)},_checkValidity:function(){var t=this.get(),e=this.get("maxlength");e>=0&&t.length>e&&this.set(t.substr(0,e)),this.get("aria-invalid")&&this.reportValidity()},reportValidity:function(){var e=t.constructor(this.get("form"));if(null!=this.get("novalidate")||null!=e.get("novalidate"))return new n;var i=this.validity();return this.set("aria-invalid",!i.valid),i.valid?this.fire("validity:ok"):this.fire("validity:fail",i),i}}),t.extend("form",{constructor:function(){var t=this;"boolean"!=typeof this.get("noValidate")?this.define("noValidate",l("noValidate"),d("noValidate")):!function(){var e=void 0;t.on("invalid",function(){return e||(e=setTimeout(function(){t.fire("submit"),e=null})),!1})}(),this.on("submit",this._submitForm).on("reset",this._resetForm)},validity:function(t){if(t!==r)this.set(e,t);else if(null!=this.get("novalidate"))return new n;return t=this.get(e),"function"==typeof t&&(t=t.call(this)),"string"==typeof t&&(t=[t]),t=t||[],this.findAll("[name]").filter(s).forEach(function(e){var i=e.get("name");i in t||!e.validity||(t[i]=e.validity())}),new n(t)},_submitForm:function(){var t=this.validity();if(!t.valid)return this.fire("validity:fail",t),!1},_resetForm:function(){this.findAll("[name]").forEach(function(t){t.set("aria-invalid",null).popover().hide()})}}),t.on("validity:ok",["target","defaultPrevented"],function(t,e){e||t.popover().hide()}),t.on("validity:fail",[1,2,"target","defaultPrevented"],function(e,i,r,o){if(!o)if(r.matches("form"))Object.keys(e).forEach(function(t){var i=e[t];if(i instanceof n){if(i.valid)return}else if(!i.length)return;r.find('[name="'+t+'"]').set("aria-invalid",!0).fire("validity:fail",i,!0)});else{var a=r.popover(),s=0;a.hasClass("better-validity-tooltip")||(a=r.popover(null,"left","bottom").addClass("better-validity-tooltip").on("click",function(){r.fire("focus"),setTimeout(function(){a.hide()},s)})),a.set("innerHTML",t.__(e[0])),i&&(s=a.hide().css("transition-duration"),s=s&&parseFloat(s)*("ms"===s.slice(-2)?1:1e3)),setTimeout(function(){a.show()},s||0)}})}(window.DOM,"_validity",{email:"should be a valid email",url:"should be a valid URL",tel:"should be a valid phone number",number:"should be a numeric value"}),DOM.importStyles("@media screen",".better-validity-tooltip{cursor:pointer;color:#ff3329;background:#FFF;font-weight:700;text-transform:uppercase;font-size:.75em;line-height:1;padding:.5em;border:1px solid;border-radius:.25em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:.9;-webkit-transform:translateY(1px);-ms-transform:translateY(1px);transform:translateY(1px);-webkit-transition:.3s ease-out;transition:.3s ease-out;-webkit-transition-property:opacity,-webkit-transform;transition-property:opacity,-webkit-transform;transition-property:transform,opacity;transition-property:transform,opacity,-webkit-transform;-webkit-transform-origin:1em 0;-ms-transform-origin:1em 0;transform-origin:1em 0}.better-validity-tooltip[aria-hidden=true]{opacity:0;-webkit-transform:translateY(1em);-ms-transform:translateY(1em);transform:translateY(1em)}.better-validity-tooltip:before,.better-validity-tooltip:after{content:'';width:0;height:0;display:block;position:absolute;bottom:100%}.better-validity-tooltip:before{border:6px solid transparent;border-bottom-color:inherit}.better-validity-tooltip:after{border:5px solid transparent;border-bottom-color:#FFF;margin-left:1px}");